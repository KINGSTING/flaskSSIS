{% extends "base.html" %}

{% block title %}Students{% endblock %}

{% block content %}
<h1>Student Management</h1>
<button id="addStudentButton" onclick="toggleForm()">Add Student</button>

<div id="formModal" class="modal hidden">
    <div class="modal-content">
        <span class="close" onclick="toggleForm()">&times;</span>
        <form id="student-form" action="/add_student" method="post">
            <label for="idNumber">ID Number:</label><br>
            <input type="text" id="idNumber" name="idNumber" required><br>
            <label for="firstName">First Name:</label><br>
            <input type="text" id="firstName" name="firstName" required><br>
            <label for="lastName">Last Name:</label><br>
            <input type="text" id="lastName" name="lastName" required><br>
            <label for="courseCode">Select Course:</label><br>
            <select id="courseCode" name="courseCode" required>
                <option value="">Select a course</option>
                {% for program in programs %}
                <option value="{{ program['programCode'] }}">{{ program['programCode'] }} - {{ program['programTitle'] }}</option>
                {% endfor %}
            </select><br>
            <label for="year">Year Level:</label>
            <select id="year" name="year" required>
                <option value="" disabled selected>Select your Year Level</option>
                <option value="Male">1st Year</option>
                <option value="Female">2nd Year</option>
                <option value="Other">3rd Year</option>
                <option value="Other">4th Year</option>
                <option value="Other">5th Year</option>
                <option value="Other">6th Year</option>
            </select>

            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>Select your gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select>
            <button type="submit">Submit</button>
        </form>
    </div>
</div>

<!-- Student Table -->
<table border="1" cellpadding="10">
    <thead>
        <tr>
            <th>ID Number</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Course Code</th>
            <th>Year</th>
            <th>Gender</th>
            <th>Status</th>
            <th>Action</th> <!-- New column for actions -->
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <tr>
            <td>{{ student['IDNumber'] }}</td>
            <td>{{ student['firstName'] }}</td>
            <td>{{ student['lastName'] }}</td>
            <td>{{ student['CourseCode'] }}</td>
            <td>{{ student['Year'] }}</td>
            <td>{{ student['Gender'] }}</td>
            <td>{{ student['Status'] }}</td>
            <td>
                <form action="/delete_student/{{ student['IDNumber'] }}" method="post" style="display:inline;">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    function toggleForm() {
        var modal = document.getElementById("formModal");
        modal.classList.toggle("hidden");
        modal.classList.toggle("show");
    }
</script>

{% endblock %}
